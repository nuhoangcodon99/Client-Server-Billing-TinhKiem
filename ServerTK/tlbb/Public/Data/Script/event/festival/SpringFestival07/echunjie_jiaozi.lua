--»î¶¯¡ª¡ª
--´º½Ú»î¶¯-ÌìÖ®½È×Ó

--½Å±¾ºÅ
x050056_g_ScriptId = 050056
--»î¶¯Ê±¼ä
x050056_g_StartDayTime = 20120119   --»î¶¯½áÊøÊ±¼ä 2009/01/19
x050056_g_EndDayTime = 20120204   --»î¶¯½áÊøÊ±¼ä 2009/02/04

x050056_g_ZiJiJiaoZi = {
												30103051,
												30103052,
												30103053,
												30103054,
												30103055,
												}	--¶Ô×Ô¼ºÊ¹ÓÃµÄ½È×ÓID
x050056_g_BieRenJiaoZi = {
													38000001,
													38000002,
													38000003,
													38000004,
													38000005,
												 }		--¶Ô±ðÈËÊ¹ÓÃµÄ½È×ÓID

x050056_g_strJiaoZiInfo1 = "#{TZJZ_20071229_17}"
--x050056_g_strJiaoZiInfo2 = "#c00ff00¡¶ÌìÁú°Ë²¿¡·#W´Ó¼´ÈÕÆðµ½2ÔÂ13ÈÕÖ¹´º½ÚÆÚ¼äÌá¹©ÌìÖ®½È×ÓÀñ°ü¡£#Y10¼¶ÒÔÉÏ#WÍæ¼ÒÃ¿Ìì¿ÉÔÚ#GËÕÖÝ#YÀÖÉÆÊ¹Õß×óÍ©#W´¦ÁìÈ¡£¬Í¬Ê±¡°·òÆÞ¹ØÏµ¡±¡°½á°Ý¹ØÏµ¡±ºÍ¡°Ê¦Í½¹ØÏµ¡±¿ÉÔÚ×é¶ÓÇé¿öÏÂ£¬¶îÍâÁìÈ¡Ò»·ÝÌìÖ®½È×ÓÀñ°ü¡£Àñ°üÖÐº¬ÓÐ¸÷ÖÖÆ·Ä¿¿ÚÎ¶µÄ½È×Ó¡£#r½á°Ý¹ØÏµÖÐÃ¿¸öÈË¶¼Ö»ÄÜÁìÈ¡Ò»·Ý£¬Î´ÁìÈ¡µÄ½á°ÝÈË¿ÉÒÔÓëÒÑÁìÈ¡µÄÐÖµÜÈ¥ÁìÈ¡Àñ°ü£»Ê¦Í½¹ØÏµÖÐµÄÊ¦¸µÈçÒÑÓëÆäÖÐÒ»¸öÍ½µÜÁìÈ¡ÁËÊ¦Í½ÌìÖ®½È×ÓÀñ°ü£¬Î´ÁìÈ¡µÄÍ½µÜÈÔ¿ÉÒÔÓëÊ¦¸µ×é¶ÓÇ°ÍùÁìÈ¡£¬µ«Ê¦¸µÃ¿ÈÕÖ»ÓÐÒ»´Î»ú»áÁìÈ¡¡£²¢ÇÒµ±Äã¼ÈÊÇÊ¦¸µÓÖÊÇÍ½µÜÊ±£¬»¹¿ÉÒÔ×÷ÎªÍ½µÜÔÙÁìÈ¡Ò»´Î¡£#r  #c00ff00ÈýÏÊ½È×Ó#WºÍ#c00ff00ËØÏÚ½È×Ó#WµÄÊ¹ÓÃ·½Ê½£ºÓÒ¼üµã»÷Ê¹ÓÃ£¬¿É°´°Ù·Ö±È»Ö¸´Ñª¡£"
x050056_g_strJiaoZiInfo2 = "#{TZJZ_20071229_16}"

--x050056_g_strPlayerLvErr = "Ç×°®µÄÍæ¼Ò£¬Çë´ïµ½10¼¶ºóÔÙÀ´ÁìÈ¡¡£"
--x050056_g_strNotSpace = "ÄúµÄ°ü¹üÃ»ÓÐ×ã¹»¿Õ¼ä£¬ÇëÕûÀíºóÔÙÀ´ÁìÈ¡¡£"
x050056_g_strPlayerLvErr = "#{TZJZ_20071229_01}"
x050056_g_strNotSpace = "#{TZJZ_20071229_02}"

--x050056_g_strTeam1 = "ÐÂÄêÐÂÆøÏó£¬³Ô½È×Ó³É½¾×Ó£¡ÕâÁ½·Ý½È×Ó¾ÍËÍ¸øÄãÁË¡£"
x050056_g_strTeam1 = "#{TZJZ_20071229_07}"

--x050056_g_strTeam2 = "ÐÂÄêÐÂÆøÏó£¬³Ô½È×Ó³É½¾×Ó£¡×£¶þÎ»ºÏ¼Ò»¶ÀÖ£¬ÐÒ¸£ÃÀÂú¡£ÕâÁ½·Ý½È×Ó¾ÍËÍ¸øÄãÁË¡£"
x050056_g_strTeam2 = "#{TZJZ_20071229_08}"

--x050056_g_strTeamError2 = "ÇëÄúÓë°éÂÂµ¥¶À×é¶Ó£¬²¢È·ÈÏ¶Ô·½ÔÚÓÐÐ§·¶Î§ÄÚ²ÅÄÜÁìÈ¡¡£"
x050056_g_strTeamError2 = "#{TZJZ_20071229_09}"

--x050056_g_strTeam3 = "ÐÂÄêÐÂÆøÏó£¬³Ô½È×Ó³É½¾×Ó£¡×£Òå±¡ÔÆÌìµÄÐÖµÜ½ãÃÃ²ÆÔ´¹ã½ø£¬ÕâÁ½·Ý½È×Ó¾ÍËÍ¸øÄãÁË¡£"
x050056_g_strTeam3 = "#{TZJZ_20071229_10}"

--x050056_g_strTeamError3 = "ÇëÓëÄúµÄ½á°Ý¹ØÏµÈË×é¶Ó£¬²¢È·ÈÏ¶Ô·½¶¼ÔÚÓÐÐ§·¶Î§ÄÚ²ÅÄÜÁìÈ¡¡£"
x050056_g_strTeamError3 = "#{TZJZ_20071229_11}"

--x050056_g_strTeam4 = "ÐÂÄêÐÂÆøÏó£¬³Ô½È×Ó³É½¾×Ó£¡×£Ê¦¸µÍòÊÂÈçÒâ£¬Í½µÜ²½²½¸ßÉý£¬ÕâÁ½·Ý½È×Ó¾ÍËÍ¸øÄãÁË¡£"
x050056_g_strTeam4 = "#{TZJZ_20071229_13}"

--x050056_g_strTeamError4 = "ÇëÈ·ÈÏ¶Ó³¤ÊÇÊ¦¸µ£¬²¢ÇÒ¶ÓÎéÖÐµÄÍ½µÜÈ«²¿ÊÇ¶Ó³¤µÄÍ½µÜ£¬Ê¦¸µ»òÍ½µÜÔÚÓÐÐ§·¶Î§ÄÚ²ÅÄÜÁìÈ¡¡£"
x050056_g_strTeamError4 = "#{TZJZ_20071229_14}"

--x050056_g_strCannotToday1 = "²»ºÃÒâË¼£¬Äã½ñÌìÒÑ¾­ÁìÈ¡¹ý#c00ff00ÌìÖ®½È×Ó#WÀñ°üÁË¡£"
x050056_g_strCannotToday1 = "#{TZJZ_20071229_03}"
--x050056_g_strCannotToday2 = "²»ºÃÒâË¼£¬Äã½ñÌìÒÑ¾­ÁìÈ¡¹ý·òÆÞ#c00ff00ÌìÖ®½È×Ó#WÀñ°üÁË¡£"
x050056_g_strCannotToday2 = "#{TZJZ_20071229_04}"

--x050056_g_strCannotToday3 = "²»ºÃÒâË¼£¬Äã½ñÌìÒÑ¾­ÁìÈ¡¹ý½á°Ý#c00ff00ÌìÖ®½È×Ó#WÀñ°üÁË¡£"
x050056_g_strCannotToday3 = "#{TZJZ_20071229_05}"
--x050056_g_strCannotToday4 = "²»ºÃÒâË¼£¬Äú½ñÌìÒÑ¾­ÁìÈ¡¹ýÊ¦Í½#c00ff00ÌìÖ®½È×Ó#WÀñ°üÁË¡£"
x050056_g_strCannotToday4 = "#{TZJZ_20071229_06}"

--x050056_g_strCannotToday4a = "²»ºÃÒâË¼£¬×÷ÎªÊ¦¸µ£¬Äú½ñÌìÒÑ¾­ÁìÈ¡¹ýÊ¦Í½#c00ff00ÌìÖ®½È×Ó#WÀñ°üÁË¡£"
x050056_g_strCannotToday4a = "#{TZJZ_20071229_15}"

--x050056_g_strCannotToday4b = "²»ºÃÒâË¼£¬×÷žéÍ½µÜ£¬Äú½ñÌìÒÑ½›îIÈ¡ß^ŽŸÍ½#c00ff00ÌìÖ®ïœ×Ó#W¶Y°üÁË¡£"
x050056_g_strCannotToday4b = "#{TZJZ_20071229_15}"
--**********************************
--ÈÎÎñÈë¿Úº¯Êý
--**********************************
function x050056_OnDefaultEvent( sceneId, selfId, targetId )

	local isTime = x050056_CheckRightTime()
	if 1 ~= isTime then
		return
	end
	
	local NumText = GetNumText()

	if NumText == 101 then

		BeginEvent(sceneId)
			AddText(sceneId, x050056_g_strJiaoZiInfo1)
			AddNumText(sceneId, x050056_g_ScriptId, "Tôi mu¯n nh§n ", 6, 201 )
			AddNumText(sceneId, x050056_g_ScriptId, "Phu thê lînh nh§n", 6, 202 )
			AddNumText(sceneId, x050056_g_ScriptId, "Kªt bái lînh nh§n", 6, 203 )
			AddNumText(sceneId, x050056_g_ScriptId, "Sß ð° lînh nh§n", 6, 204 )
			
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)

	elseif NumText == 201 then

		--Áì¸öÈË½È×Ó....
		x050056_GiveSelfJiaoZi( sceneId, selfId, targetId )

	elseif NumText == 202 then

		--Áì·òÆÞ½È×Ó....
		x050056_GiveFuqiJiaoZi( sceneId, selfId, targetId )

	elseif NumText == 203 then

		--Áì½á°Ý½È×Ó....
		x050056_GiveJiebaiJiaoZi( sceneId, selfId, targetId )

	elseif NumText == 204 then

		--ÁìÊ¦Í½½È×Ó....
		x050056_GiveShituJiaoZi( sceneId, selfId, targetId )

	elseif NumText == 205 then
		--Ìì×Ó½È×Ó½éÉÜ
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strJiaoZiInfo2 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)

	end

end

--**********************************
--ÁÐ¾ÙÊÂ¼þ
--**********************************
function x050056_OnEnumerate( sceneId, selfId, targetId )

    local isTime = x050056_CheckRightTime()
    if 1 == isTime then
			AddNumText(sceneId, x050056_g_ScriptId, "Thiên Chi Giáo TØ", 6, 101 )	
			AddNumText(sceneId, x050056_g_ScriptId, "Gi¾i thi®u Thiên Chi Giáo TØ", 11, 205 )												
    end

end

--**********************************
--¼ì²â»î¶¯ÊÇ·ñÒÑ½áÊø
--**********************************
function x050056_CheckRightTime()

	local curDayTime = GetTime2Day()
	if curDayTime >= x050056_g_StartDayTime and curDayTime <= x050056_g_EndDayTime then
		return 1
	else
		return 0
	end

end

--**********************************
--Áì¸öÈË½È×Ó
--**********************************
function x050056_GiveSelfJiaoZi( sceneId, selfId, targetId )

	--¼ì²âÍæ¼ÒµÈ¼¶....
	if x050056_CheckPlayerLv( sceneId, selfId, targetId ) == 0 then
		return
	end

	--½ñÌìÊÇ·ñÒÑ¾­Áì¹ýÁË....
	local lastDayTime = GetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI1_DAYTIME )
	local CurDayTime = GetDayTime()
	if CurDayTime <= lastDayTime then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strCannotToday1 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--¼ì²â±³°üÊÇ·ñÓÐµØ·½....
	if x050056_CheckPacketSpace( sceneId, selfId, targetId ) == 0 then
		return
	end

	--¸øÍæ¼Ò½È×Ó....
	BeginEvent(sceneId)
		AddText( sceneId, x050056_g_strTeam1 )
	EndEvent(sceneId)
	DispatchEventList(sceneId,selfId,targetId)

	x050056_GivePlayerJiaoZi( sceneId, selfId )
	SetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI1_DAYTIME, CurDayTime )

end

--**********************************
--Áì·òÆÞ½È×Ó
--**********************************
function x050056_GiveFuqiJiaoZi( sceneId, selfId, targetId )

	--¼ì²âÍæ¼ÒµÈ¼¶....
	if x050056_CheckPlayerLv( sceneId, selfId, targetId ) == 0 then
		return
	end

	--ÊÇ·ñ2ÈË¶ÓÎé....²¢ÇÒ¶ÓÔ±È«²¿ÔÚ¸½½ü....
	local TeamSize = LuaFnGetTeamSize( sceneId, selfId )
	local NearTeamSize = GetNearTeamCount( sceneId, selfId )
	if TeamSize ~= 2 or TeamSize ~= NearTeamSize then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError2 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--ÊÇ·ñ·òÆÞ....
	local	ObjID0		= GetNearTeamMember( sceneId, selfId, 0 )
	local	ObjID1		= GetNearTeamMember( sceneId, selfId, 1 )
	local	SelfGUID	= LuaFnObjId2Guid( sceneId, ObjID0 )
	local	SpouGUID	= LuaFnGetSpouseGUID( sceneId, ObjID1 )
	if LuaFnIsMarried( sceneId, ObjID0 ) == 0 or LuaFnIsMarried( sceneId, ObjID1 ) == 0 or SelfGUID ~= SpouGUID then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError2 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--½ñÌìÊÇ·ñÒÑ¾­Áì¹ýÁË....
	local lastDayTime = GetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI2_DAYTIME )
	local CurDayTime = GetDayTime()
	if CurDayTime <= lastDayTime then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strCannotToday2 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--¼ì²â±³°üÊÇ·ñÓÐµØ·½....
	if x050056_CheckPacketSpace( sceneId, selfId, targetId ) == 0 then
		return
	end

	--¸øÍæ¼Ò½È×Ó....
	BeginEvent(sceneId)
		AddText( sceneId, x050056_g_strTeam2 )
	EndEvent(sceneId)
	DispatchEventList(sceneId,selfId,targetId)

	x050056_GivePlayerJiaoZi( sceneId, selfId )
	SetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI2_DAYTIME, CurDayTime )

end

--**********************************
--Áì½á°Ý½È×Ó
--**********************************
function x050056_GiveJiebaiJiaoZi( sceneId, selfId, targetId )

	--¼ì²âÍæ¼ÒµÈ¼¶....
	if x050056_CheckPlayerLv( sceneId, selfId, targetId ) == 0 then
		return
	end

	--ÊÇ·ñ2ÈË(º¬)ÒÔÉÏ¶ÓÎé....²¢ÇÒ¶ÓÔ±È«²¿ÔÚ¸½½ü....
	local TeamSize = LuaFnGetTeamSize( sceneId, selfId )
	local NearTeamSize = GetNearTeamCount( sceneId, selfId )
	if TeamSize < 2 or TeamSize ~= NearTeamSize then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError3 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--ÊÇ·ñÈ«²¿½á°Ý....
	local allJieBai = 1
	local firstPlayer = GetNearTeamMember( sceneId, selfId, 0 )
	local otherPlayer
	for i=1, NearTeamSize-1 do
		otherPlayer = GetNearTeamMember( sceneId, selfId, i )
		if LuaFnIsBrother(sceneId, firstPlayer, otherPlayer) ~= 1 then
			allJieBai = 0
		end
	end
	if allJieBai == 0 then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError3 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--½ñÌìÊÇ·ñÒÑ¾­Áì¹ýÁË....
	local lastDayTime = GetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI3_DAYTIME )
	local CurDayTime = GetDayTime()
	if CurDayTime <= lastDayTime then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strCannotToday3 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--¼ì²â±³°üÊÇ·ñÓÐµØ·½....
	if x050056_CheckPacketSpace( sceneId, selfId, targetId ) == 0 then
		return
	end

	--¸øÍæ¼Ò½È×Ó....
	BeginEvent(sceneId)
		AddText( sceneId, x050056_g_strTeam3 )
	EndEvent(sceneId)
	DispatchEventList(sceneId,selfId,targetId)

	x050056_GivePlayerJiaoZi( sceneId, selfId )
	SetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI3_DAYTIME, CurDayTime )

end

--**********************************
--ÁìÊ¦Í½½È×Ó
--**********************************
function x050056_GiveShituJiaoZi( sceneId, selfId, targetId )

	--¼ì²âÍæ¼ÒµÈ¼¶....
	if x050056_CheckPlayerLv( sceneId, selfId, targetId ) == 0 then
		return
	end

	--ÊÇ·ñ2ÈË(º¬)ÒÔÉÏ¶ÓÎé....²¢ÇÒ¶ÓÔ±È«²¿ÔÚ¸½½ü....
	local TeamSize = LuaFnGetTeamSize( sceneId, selfId )
	local NearTeamSize = GetNearTeamCount( sceneId, selfId )
	if TeamSize < 2 or TeamSize ~= NearTeamSize then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError4 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--¶ÓÎéÊÇ·ñ¶ÓÔ±È«ÊÇ¶Ó³¤Í½µÜ....
	local OkTeam = 1
	local leaderID = GetTeamLeader( sceneId, selfId )
	local otherPlayer
	for i=0, NearTeamSize-1 do
		otherPlayer = GetNearTeamMember( sceneId, selfId, i )
		if leaderID ~= otherPlayer and LuaFnIsMaster(sceneId, otherPlayer, leaderID) ~= 1 then
			OkTeam = 0
		end
	end
	if OkTeam == 0 then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strTeamError4 )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--½ñÌìÊÇ·ñÒÑ¾­Áì¹ýÁË....
	local lastDayTime
	if leaderID == selfId then
		lastDayTime = GetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI4A_DAYTIME )
	else
		lastDayTime = GetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI4B_DAYTIME )
	end
	local CurDayTime = GetDayTime()
	if CurDayTime <= lastDayTime then
		BeginEvent(sceneId)
			if leaderID == selfId then
				AddText( sceneId, x050056_g_strCannotToday4a )
			else
				--AddText( sceneId, x050056_g_strCannotToday4b )
				AddText( sceneId, x050056_g_strCannotToday4 )
				
			end
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end

	--¼ì²â±³°üÊÇ·ñÓÐµØ·½....
	if x050056_CheckPacketSpace( sceneId, selfId, targetId ) == 0 then
		return
	end

	--¸øÍæ¼Ò½È×Ó....
	BeginEvent(sceneId)
		AddText( sceneId, x050056_g_strTeam4 )
	EndEvent(sceneId)
	DispatchEventList(sceneId,selfId,targetId)

	x050056_GivePlayerJiaoZi( sceneId, selfId )
	if leaderID == selfId then
		SetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI4A_DAYTIME, CurDayTime )
	else
		SetMissionData( sceneId, selfId, MD_CHUNJIE_TUANYUANJIAOZI4B_DAYTIME, CurDayTime )
	end

end

--**********************************
--¼ì²âÍæ¼ÒµÈ¼¶ÊÇ·ñ·ûºÏÒªÇó
--**********************************
function x050056_CheckPlayerLv( sceneId, selfId, targetId )

	if GetLevel( sceneId, selfId ) < 10 then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strPlayerLvErr )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return 0
	else
		return 1
	end

end

--**********************************
--¼ì²âÍæ¼Ò±³°ü¿Õ¼äÊÇ·ñ×ã¹»
--**********************************
function x050056_CheckPacketSpace( sceneId, selfId, targetId )

	if LuaFnGetPropertyBagSpace( sceneId, selfId ) < 2 then
		BeginEvent(sceneId)
			AddText( sceneId, x050056_g_strNotSpace )
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return 0
	else
		return 1
	end

end

--**********************************
--¸øÍæ¼Ò½È×Ó
--**********************************
function x050056_GivePlayerJiaoZi( sceneId, selfId )

		--BeginAddItem(sceneId)
		--AddItem( sceneId, 40001005, 1 )
		--local ret = EndAddItem(sceneId,selfId)
		--if ret < 1  then
		--	BeginEvent(sceneId)
		--		AddText( sceneId, "ÄãµÄ±³°üÒÑÂú", 0 )
		--	EndEvent(sceneId)
		--	DispatchMissionTips(sceneId,selfId)
		--else
		--	AddItemListToHuman(sceneId,selfId)
		--	BeginEvent(sceneId)
		--	AddText( sceneId, "ÄãµÃµ½ÁË±¯ËÖÇå·çµÄ½âÒ©", 0 )
		--EndEvent(sceneId)
		--	DispatchMissionTips(sceneId,selfId)
		--end
	local num1 = getn(x050056_g_ZiJiJiaoZi)
	local num2 = getn(x050056_g_BieRenJiaoZi)
	
	local id1 = x050056_g_ZiJiJiaoZi[random(num1)]
	local id2 = x050056_g_BieRenJiaoZi[random(num2)]
	
	--¸ø½È×Ó1×Ô¼ºµÄ....
	local BagIndex = TryRecieveItem( sceneId, selfId, id1, QUALITY_MUST_BE_CHANGE )

	if BagIndex ~= -1 then
		LuaFnRefreshItemInfo( sceneId, selfId, BagIndex )
		BeginEvent( sceneId )
			AddText( sceneId, "Các hÕ nh§n ðßþc "..GetItemName(sceneId,id1) )
		EndEvent( sceneId )
		DispatchMissionTips( sceneId, selfId )
	end
	
	--¸ø½È×Ó2±ðÈËµÄ....
	BagIndex = TryRecieveItem( sceneId, selfId, id2, QUALITY_MUST_BE_CHANGE )
	
	if BagIndex ~= -1 then
		--ÉèÖÃÎïÆ·ËùÓÐÕß....±ðÈË½È×Ó×Ô¼º²»ÄÜÓÃ....Ö»ÄÜËÍ¸ø±ðÈËÓÃ....ËùÒÔÒª¼ÇÂ¼ËùÓÐÕßµÄGUID....
		local guid = LuaFnGetGUID( sceneId, selfId )
		SetBagItemParam( sceneId, selfId, BagIndex, 4, 2, guid-2147483648 )
		--ÉèÖÃÎïÆ·´´½¨Õß....ÓÃÓÚÀñÆ·ÀàÎïÆ·ÔÚtooltipsÉÏÏÔÊ¾"xxxµÄÀñÆ·"....
		LuaFnSetItemCreator( sceneId, selfId, BagIndex, GetName( sceneId, selfId ) )
		LuaFnRefreshItemInfo( sceneId, selfId, BagIndex )
		BeginEvent( sceneId )
			AddText( sceneId, "Các hÕ nh§n ðßþc "..GetItemName(sceneId,id2) )
		EndEvent( sceneId )
		DispatchMissionTips( sceneId, selfId )
	end

end

--**********************************
--¼ì²â½ÓÊÜÌõ¼þ
--**********************************
function x050056_CheckAccept( sceneId, selfId )
end

--**********************************
--½ÓÊÜ
--**********************************
function x050056_OnAccept( sceneId, selfId )
end

--**********************************
--·ÅÆú
--**********************************
function x050056_OnAbandon( sceneId, selfId )
end

--**********************************
--¼ÌÐø
--**********************************
function x050056_OnContinue( sceneId, selfId, targetId )
end

--**********************************
--¼ì²âÊÇ·ñ¿ÉÒÔÌá½»
--**********************************
function x050056_CheckSubmit( sceneId, selfId )
end

--**********************************
--Ìá½»
--**********************************
function x050056_OnSubmit( sceneId, selfId, targetId, selectRadioId )
end

--**********************************
--É±ËÀ¹ÖÎï»òÍæ¼Ò
--**********************************
function x050056_OnKillObject( sceneId, selfId, objdataId ,objId )
end

--**********************************
--½øÈëÇøÓòÊÂ¼þ
--**********************************
function x050056_OnEnterArea( sceneId, selfId, zoneId )
end

--**********************************
--µÀ¾ß¸Ä±ä
--**********************************
function x050056_OnItemChanged( sceneId, selfId, itemdataId )
end
