-- NPC Do Dai Sang

x002084_g_scriptId = 002084


x002084_g_xinfaid = -1
--x002084_g_eventList={210244}
x002084_g_bitichthu8 = {
	{menpai=0, xinfaid=72}, --tlam
	{menpai=1, xinfaid=73}, --mg
	{menpai=2, xinfaid=74}, --cb
	{menpai=3, xinfaid=75}, --vd
	{menpai=4, xinfaid=76}, --nm
	{menpai=5, xinfaid=77}, --tt
	{menpai=6, xinfaid=78}, --tlong
	{menpai=7, xinfaid=79}, --ts
	{menpai=8, xinfaid=80}, --td
}
x002084_g_xinfa_study = {
	{level=1, money=30,exp=30},
	{level=2, money=60,exp=108},
	{level=3, money=90,exp=210},
	{level=4, money=120,exp=384},
	{level=5, money=150,exp=594},
	{level=6, money=180,exp=870},
	{level=7, money=210,exp=1222},
	{level=8, money=240,exp=1656},
	{level=9, money=270,exp=1872},
	{level=10, money=300,exp=2100},
	{level=11, money=330,exp=2340},
	{level=12, money=360,exp=2592},
	{level=13, money=390,exp=2958},
	{level=14, money=420,exp=3348},
	{level=15, money=450,exp=3876},
	{level=16, money=504,exp=4440},
	{level=17, money=645,exp=5166},
	{level=18, money=810,exp=6072},
	{level=19, money=1008,exp=7176},
	{level=20, money=1716,exp=8496},
	{level=21, money=2111,exp=10050},
	{level=22, money=2574,exp=11856},
	{level=23, money=3115,exp=13932},
	{level=24, money=3742,exp=16296},
	{level=25, money=4463,exp=19140},
	{level=26, money=5286,exp=22500},
	{level=27, money=6225,exp=26226},
	{level=28, money=7282,exp=30336},
	{level=29, money=8476,exp=34848},
	{level=30, money=9076,exp=41208},
	{level=31, money=10110,exp=48090},
	{level=32, money=11227,exp=55512},
	{level=33, money=12436,exp=63492},
	{level=34, money=13740,exp=72048},
	{level=35, money=15145,exp=81198},
	{level=36, money=16653,exp=90960},
	{level=37, money=18271,exp=101352},
	{level=38, money=20004,exp=112392},
	{level=39, money=21857,exp=124098},
	{level=40, money=23836,exp=136620},
	{level=41, money=32432,exp=149986},
	{level=42, money=35239,exp=164220},
	{level=43, money=38226,exp=179352},
	{level=44, money=41395,exp=195408},
	{level=45, money=44757,exp=212416},
	{level=46, money=48321,exp=230400},
	{level=47, money=52093,exp=249390},
	{level=48, money=56079,exp=269412},
	{level=49, money=60288,exp=290494},
	{level=50, money=68247,exp=312660},
	{level=51, money=69958,exp=335940},
	{level=52, money=73669,exp=360360},
	{level=53, money=77877,exp=385948},
	{level=54, money=84000,exp=412728},
	{level=55, money=87790,exp=440730},
	{level=56, money=91994,exp=469980},
	{level=57, money=96696,exp=500506},
	{level=58, money=101896,exp=532332},
	{level=59, money=107595,exp=565488},
	{level=60, money=113793,exp=600000},
	{level=61, money=120488,exp=635896},
	{level=62, money=127682,exp=673200},
	{level=63, money=135375,exp=711942},
	{level=64, money=143565,exp=752148},
	{level=65, money=152255,exp=793846},
	{level=66, money=161442,exp=838950},
	{level=67, money=171128,exp=889276},
	{level=68, money=181313,exp=945000},
	{level=69, money=191995,exp=1006306},
	{level=70, money=203176,exp=1073370},
	{level=71, money=214856,exp=1146376},
	{level=72, money=227034,exp=1225500},
	{level=73, money=239710,exp=1310926},
	{level=74, money=252884,exp=1402830},
	{level=75, money=266557,exp=1506136},
	{level=76, money=280729,exp=1621200},
	{level=77, money=295398,exp=1748386},
	{level=78, money=310567,exp=1888050},
	{level=79, money=326233,exp=2040556},
	{level=80, money=342398,exp=2246580},
	{level=81, money=359061,exp=2558926},
	{level=82, money=376223,exp=3032790},
	{level=83, money=393883,exp=3725776},
	{level=84, money=412041,exp=4697880},
	{level=85, money=430698,exp=6011506},
	{level=86, money=449853,exp=7731450},
	
	{level=87, money=469507,exp=9924916},
	{level=88, money=489658,exp=12661500},
	{level=89, money=510309,exp=16013206},
	{level=90, money=531457,exp=20054430},
	{level=91, money=553104,exp=24861976},
	{level=92, money=575250,exp=30515040},
	{level=93, money=597893,exp=37095226},
	{level=94, money=621036,exp=44686530},
	{level=95, money=644676,exp=53375356},
	{level=96, money=668815,exp=63250500},
	{level=97, money=693452,exp=74403166},
	{level=98, money=718588,exp=86926950},
	{level=99, money=744222,exp=100917856},
	{level=100, money=770355,exp=102521640},
	{level=101, money=796986,exp=104168926},
	{level=102, money=824115,exp=105860610},
	{level=103, money=851742,exp=107597596},
	{level=104, money=879867,exp=109380780},
	{level=105, money=908493,exp=111211066},
	{level=106, money=943806,exp=113089350},
	{level=107, money=975606,exp=115016536},
	{level=108, money=1008123,exp=116993520},
	{level=109, money=1041363,exp=119021206},
	{level=110, money=2150676,exp=121100490},
	{level=111, money=2220108,exp=123232276},
	{level=112, money=2291040,exp=125417460},
	{level=113, money=2363490,exp=127656946},
	{level=114, money=2437470,exp=129951630},
	{level=115, money=2512998,exp=132302416},
	{level=116, money=2590086,exp=134710200},
	{level=117, money=2668758,exp=137175886},
	{level=118, money=2749026,exp=139700370},
	{level=119, money=2830908,exp=142284556},
	{level=120, money=2914416,exp=144929340},
	{level=121, money=30,exp=30},
	{level=122, money=30,exp=30},
	{level=123, money=30,exp=30},
	{level=124, money=30,exp=30},
	{level=125, money=30,exp=30},
	{level=126, money=30,exp=30},
	{level=127, money=30,exp=30},
	{level=128, money=30,exp=30},
	{level=129, money=30,exp=30},
	{level=130, money=30,exp=30},
	{level=131, money=30,exp=30},
	{level=132, money=30,exp=30},
	{level=133, money=30,exp=30},
	{level=134, money=30,exp=30},
	{level=135, money=30,exp=30},
	{level=136, money=30,exp=30},
	{level=137, money=30,exp=30},
	{level=138, money=30,exp=30},
	{level=139, money=30,exp=30},
	{level=140, money=30,exp=30},
	{level=141, money=30,exp=30},
	{level=142, money=30,exp=30},
	{level=143, money=30,exp=30},
	{level=144, money=30,exp=30},
	{level=145, money=30,exp=30},
	{level=146, money=30,exp=30},
	{level=147, money=30,exp=30},
	{level=148, money=30,exp=30},
	{level=149, money=30,exp=30},
	{level=150, money=30,exp=30},
	
}
--**********************************
--ÊÂ¼þ½»»¥Èë¿Ú
--**********************************
function x002084_OnDefaultEvent( sceneId, selfId, targetId )
	--x002084_TransferBT( sceneId, selfId, targetId )
	BeginEvent( sceneId )
	--	strText = "   Chào m×ng các hÕ ðªn v¾i thª gi¾i Thiên Long Bát Bµ, hãy nh¾ ðªn g£p ta khi luy®n lên mµt ðÆng c¤p nh¤t ð¸nh, ta có r¤t nhi«u quà cho các hÕ ð¤y !"

		strText = "  #31#31#31T× #cFF0000ngày 8/11/2013 ðªn hªt ngày 12/11/2013 #Wb¢ng hæu c¥n tiªn hành ð±i toàn bµ s¯ lßþng #YBí T¸ch Tàn Di®p #Wcòn trong ngß¶i và thß½ng kh¯ ra #GThánh Thú Lân."
		AddText( sceneId, strText )
		--AddNumText( sceneId, x002084_g_scriptId, "#31Ð±i Bí T¸ch Tàn Di®p sang Thánh Thú Lân", 2, 100001 )
		AddNumText( sceneId, x002084_g_scriptId, "#PNh§n KNB", 5, 1001 )
		--AddNumText( sceneId, x002084_g_scriptId, "#PNh§n ði¬m t£ng", 5, 1002 )		
		AddNumText( sceneId, x002084_g_scriptId, "#PH÷c skill #YLi­u Ám Hoa Minh #P[Thiên S½n]", 2, 1003 )
		AddNumText( sceneId, x002084_g_scriptId, "#PNh§n #GKÛ nång s½ c¤p", 2, 1006 )
		AddNumText( sceneId, x002084_g_scriptId, "#PThång c¤p tâm pháp #GBí t¸ch th¤t truy«n", 2, 1007 )
		AddNumText( sceneId, x002084_g_scriptId, "#PSØa l²i skill b¸ m¤t", 2, 1008 )
		--AddNumText( sceneId, x002084_g_scriptId, "#PTrä l¶i câu höi ch¯ng Auto", 2, 1009 )
		
		AddNumText( sceneId, x002084_g_scriptId, "#PÐ±i #c00FFFFngân lßþng #Psang #Yphiªu ti«n vàng",2 ,2002  )
		--hd edit
		--AddNumText( sceneId, x002084_g_scriptId, "Nh§n TBP3, UHT, TV, LHTP, TTL", 6, 3001 )
		AddNumText( sceneId, x002084_g_scriptId, "HuÖ hi®u Ñng Tri Nhøc H§u Dûng", 6, 3002 )
		--AddNumText( sceneId, x002084_g_scriptId, "HuÖ hi®u Ñng Tâm hoài c¯ chü", 6, 3003 )
		--AddNumText( sceneId, x002084_g_scriptId, "SØ døng ði¬m môn phái", 6, 3004 )
		--hd add tcgh 22/9/2013
		--AddNumText( sceneId, x002084_g_scriptId, "Thu h°i #YChß·ng Cñ Yªu Quyªt", 6, 3005 )
		AddNumText( sceneId, x002084_g_scriptId, "Nh§n BUFF #Y[Bang Hµi ÐÕi Chiªn]", 6, 3006 )
		--AddNumText( sceneId, x002084_g_scriptId, "Nh§n Long Vån #Y[Bang Hµi ÐÕi Chiªn]", 6, 3007 )
		--AddNumText( sceneId, x002084_g_scriptId, "Nh§n danh hi®u #Y[Miss/Mr Tình Kiªm]", 6, 3008 )
		
	EndEvent( sceneId )
	DispatchEventList( sceneId, selfId, targetId )
end


function x002084_OnEventRequest( sceneId, selfId, targetId, eventId )
	if GetNumText() == 100001 then
		x002084_TransferBT( sceneId, selfId, targetId )
		local str = "Trao ð±i thành công"
		x002084_NotifyFailTips( sceneId, selfId, str )
		x002084_NotifyFailBox( sceneId, selfId, targetId, str )
	end
	
	if GetNumText() == 3001 then --Nh§n TBP3, UHT, TV, LHTP, TTL
			--for i=1,20 do
				--TryRecieveItem( sceneId, selfId, 30505908, 1 )
				--TryRecieveItem( sceneId, selfId, 30700213, 1 )
				--TryRecieveItem( sceneId, selfId, 30505197, 1 )
				--TryRecieveItem( sceneId, selfId, 30505198, 1 )
				--TryRecieveItem( sceneId, selfId, 20310117, 1 )
				--TryRecieveItem( sceneId, selfId, 20301009, 1 )

			--end
			BeginEvent(sceneId)
				AddText(sceneId,"Chúc m×ng bÕn nh§n ðßþc 50 Th¥n Binh Phù 3. ChÑc nång chï có · phiên bän test")
			EndEvent(sceneId)
			DispatchEventList(sceneId,selfId,targetId)
	end
	--//////////////////////////////////////////////////////////
	if GetNumText() == 3002 then --huy hieu ung Tri Nhøc H§u Dûng
		local ketqua = LuaFnCancelSpecificImpact(sceneId,selfId,31550)
		BeginEvent(sceneId)
			if ketqua ~=0 then
				AddText(sceneId,"Kªt quä : "..ketqua.." #rÐã huÖ thành công hi®u Ñng.")
			else
				AddText(sceneId,"Kªt quä : "..ketqua.." #rCác hÕ không có hi®u Ñng Tri Nhøc H§u Dûng nên không th¬ huÖ.")
			end
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	end
	if GetNumText() == 3003 then --huy hieu ung tam hoai co chu
		local ketqua = LuaFnCancelSpecificImpact(sceneId,selfId,59)
		BeginEvent(sceneId)
			if ketqua ~=0 then
				AddText(sceneId,"Kªt quä : "..ketqua.." #rÐã huÖ thành công hi®u Ñng. Các hÕ có th¬ gia nh§p bang phái ðßþc r°i.")
			else
				AddText(sceneId,"Kªt quä : "..ketqua.." #rCác hÕ không có hi®u Ñng Tâm hoài c¯ chü nên không th¬ huÖ.")
			end
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	end
	if GetNumText() == 3004 then --shop dmp
		--DispatchShopItem( sceneId, selfId,targetId, 226 )
	end
	if GetNumText() == 3005 then --thu h°i chß·ng cñ yªu quyªt
		--x002084_ChuongCuYQ( sceneId, selfId, targetId )
	end
	if GetNumText() == 3006 then --Nh§n BUFF #Y[Bang Hµi ÐÕi Chiªn]
		x002084_BuffBHDC( sceneId, selfId, targetId )
	end
	if GetNumText() == 3007 then --Nh§n BUFF #Y[Bang Hµi ÐÕi Chiªn]
		--x002084_NhanLV_BHDC( sceneId, selfId, targetId )
	end
	if GetNumText() == 3008 then --Nh§n danh hi®u #Y[Miss/Mr Tình Kiªm]
		--x002084_GetTitle_Miss( sceneId, selfId, targetId )
	end
	if GetNumText() == 1001 then --nhan knb
   		--AddMoney( sceneId, selfId, 1000000 )
		YuanBao(sceneId,selfId,targetId,1,300000)
		BeginEvent(sceneId)
		AddText(sceneId,"Nh§n thành công 300 000 KNB")
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	end	
	if GetNumText() == 1002 then --nhan diem tang
   		--AddMoney( sceneId, selfId, 1000000 )
		--ZengDian(sceneId,selfId,targetId,1,300000)
		BeginEvent(sceneId)
			AddText(sceneId,"Nh§n thành công 300 000 ði¬m t£ng, tính nång chï có · bän thØ nghi®m")
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	end
	if GetNumText() == 1003 then  --skill thien son
		x002084_SkillThienSon( sceneId, selfId, targetId )
	end
	if GetNumText() == 1006 then --nh§n kÛ nång s½ c¤p
		x002084_basicskill(sceneId,selfId,targetId)
	end
	if GetNumText() == 1007 then --thang cap tam phap bi tich thu 8
		x002084_upbt8( sceneId, selfId, targetId )
	end	
	if GetNumText() == 1008 then --nh§n skill c½ bän
		x002084_AddBackSkillXinfa(sceneId, selfId, targetId)
	end
	if GetNumText() == 1009 then --Trä l¶i câu höi ch¯ng Auto
		x002084_ShenYuan( sceneId, selfId, targetId )
	end
	if GetNumText() == 2002 then --ð±i sang phiªu ti«n vàng
		BeginEvent( sceneId )
			AddText( sceneId, "Ngân lßþng các hÕ mang theo trong ngß¶i có th¬ ðßþc chuy¬n sang phiªu d¬ thu§n ti®n cho vi®c giao d¸ch. Khi nào mu¯n chuy¬n ð±i, hãy ðªn g£p ta." )
			AddNumText(sceneId, x002084_g_scriptId, "Ð±i 1 vÕn lßþng vàng sang phiªu", 6, 2003 )
			AddNumText(sceneId, x002084_g_scriptId, "Ð±i 10 vÕn lßþng vàng sang phiªu", 6, 2004 )
		EndEvent( sceneId )
		DispatchEventList( sceneId, selfId, targetId )
	end
	if GetNumText() == 2003 then --phiªu 1v
		x002084_tienvang1w(sceneId, selfId, targetId)
	end
	if GetNumText() == 2004 then --phiªu 10v
		x002084_tienvang10w(sceneId, selfId, targetId)
	end
	
	if GetNumText() >= 30000 then --dong y up bt8
		key = GetNumText()
		x002084_upxinfabt8( sceneId, selfId,targetId, key) --call new function
	end	
end

function x002084_basicskill(sceneId,selfId,targetId)
	if  HaveSkill(sceneId, selfId, 241) <= 0  then
			AddSkill( sceneId, selfId, 241 )
		end
		if  HaveSkill(sceneId, selfId, 242) <= 0  then
			AddSkill( sceneId, selfId, 242 )
		end	
		if  HaveSkill(sceneId, selfId, 243) <= 0  then
			AddSkill( sceneId, selfId, 243 )
		end
		if  HaveSkill(sceneId, selfId, 244) <= 0  then
			AddSkill( sceneId, selfId, 244 )
		end
		if  HaveSkill(sceneId, selfId, 245) <= 0  then
			AddSkill( sceneId, selfId, 245 )
		end
		if  HaveSkill(sceneId, selfId, 246) <= 0  then
			AddSkill( sceneId, selfId, 246 )
		end
		if  HaveSkill(sceneId, selfId, 247) <= 0  then
			AddSkill( sceneId, selfId, 247 )
		end
		if  HaveSkill(sceneId, selfId, 248) <= 0  then
			AddSkill( sceneId, selfId, 248 )
		end
		if  HaveSkill(sceneId, selfId, 249) <= 0  then
			AddSkill( sceneId, selfId, 249 )
		end
		BeginEvent(sceneId)
		AddText(sceneId,"Nh§n thành công kÛ nång s½ c¤p")
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
	--//////////////////////////////////////////////////////////
end
function x002084_zengdian2item(sceneId, selfId, targetId)
	nZen = ZengDian(sceneId,selfId,targetId,3,_)
	--check s¯ ði¬m t£ng ðang có
	if nZen < 10000 then
		x002084_NotifyFailBox( sceneId, selfId, targetId, "S¯ ði¬m t£ng t¯i thi¬u mang theo phäi nhi«u h½n #Y10 000 #Wði¬m t£ng và ít h½n #Y1.000.000 #Wði¬m t£ng m¾i có th¬ thñc hi®n chuy¬n ð±i." )
		return
	end
	--add hµp tlbb
	
	local nBagIndex = TryRecieveItem( sceneId, selfId, 30505074, 1 );
	if nBagIndex < 0 then
		BeginEvent(sceneId)
			strText = "Túi ðñng ð° ðã ð¥y"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	end
	--tr× ði¬m t£ng
	ZengDian(sceneId,selfId,targetId,2,10000)
	local str = " #YCác hÕ ðã chuy¬n ð±i thành công 10 000 ði¬m t£ng !"
	x002084_NotifyFailTips( sceneId, selfId, str )
	x002084_NotifyFailBox( sceneId, selfId, targetId, str )
	
end
function x002084_item2zengdian(sceneId, selfId, targetId)
	--check vat pham tlbb
	local number = LuaFnGetAvailableItemCount(sceneId, selfId, 30505074)
	if number<1 then
		x002084_NotifyFailBox( sceneId, selfId, targetId, "Không có v§t ph¦m ð±i ði¬m t£ng!" )
		return
	end
	
	nZen = ZengDian(sceneId,selfId,targetId,3,_)
	local diemtang = 10000*number
	--GetItemCount(sceneId, selfId, 30505074)
	
	if diemtang+nZen >999999 then
		x002084_NotifyFailBox( sceneId, selfId, targetId, "S¯ ði¬m t£ng khi hoán ð±i vßþt mÑc 999,999 ði¬m t£ng. Hoán ð±i th¤t bÕi !" )
		return
	end
	local reply = LuaFnDelAvailableItem(sceneId,selfId,30505074,number)
	--check s¯ ði¬m t£ng ðang có
	if reply > 0 then

		local str = " #YBÕn v×a nh§n ðßþc #W"..diemtang.." ði¬m t£ng #YCám ½n bÕn ðã üng hµ server !!"
		x002084_NotifyFailTips( sceneId, selfId, str )
		x002084_NotifyFailBox( sceneId, selfId, targetId, str )
		ZengDian(sceneId,selfId,targetId,1,diemtang);
	end
end


function x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
	BeginEvent( sceneId )
		AddText( sceneId, msg )
	EndEvent( sceneId )
	DispatchEventList( sceneId, selfId, targetId )
end
function x002084_NotifyFailTips( sceneId, selfId, Tip )
	BeginEvent( sceneId )
		AddText( sceneId, Tip )
	EndEvent( sceneId )
	DispatchMissionTips( sceneId, selfId )
end

function x002084_SkillThienSon( sceneId, selfId, targetId )
	if GetMenPai( sceneId, selfId ) ~= MP_TIANSHAN then
		BeginEvent(sceneId)
			AddText(sceneId, " Các hÕ không là ð® tØ phái Thiên S½n, không th¬ h÷c loÕi võ công này !" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	if  HaveSkill(sceneId, selfId, 514) > 0  then
		BeginEvent(sceneId)
			AddText(sceneId, " Các hÕ ðã h÷c tuy®t kÛ này r°i !" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	AddSkill( sceneId, selfId, 514 )
	x002084_NotifyFailTips( sceneId, selfId, "Các hÕ ðã h÷c ðßþc kÛ nång \"Li­u Ám Hoa Minh\"." )
	
	str = format("#PChúc m×ng chúc m×ng, #{_INFOUSR%s} ðã v×a m¾i tu luy®n thành công thành thÑ 9 cüa tuy®t kÛ võ h÷c Thiên S½n, giang h° nghe ðªn ð«u sþ hãi.", GetName(sceneId,selfId))
	BroadMsgByChatPipe(sceneId, selfId, str, 4)
end

function x002084_AddBackSkillXinfa(sceneId, selfId, targetId)
	local SkillList = {0,1,21,22,34,35}
	for i = 1, getn(SkillList) do
		if HaveSkill(sceneId, selfId, SkillList[i]) < 1 then
			AddSkill(sceneId, selfId, SkillList[i])
		end
	end
	for i = 241, 249 do
		if HaveSkill(sceneId, selfId, i) < 1 then
			AddSkill(sceneId, selfId, i)
		end
	end
	local nMenpai = GetMenPai(sceneId, selfId)
	--update tam phap
	--if nMenpai >= 0 and nMenpai <=8   then
	--	for i=1, 6 do
	--		LuaFnSetXinFaLevel(sceneId,selfId,nMenpai*6 + i,120)
	--	end
	--end
	if nMenpai == 0 then
		for i = 281, 304 do
			if HaveSkill(sceneId, selfId, i) < 1 then
				AddSkill(sceneId, selfId, i)
			end
		end
	end
		if nMenpai == 1 then
			for i = 311, 332 do --hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 2 then
			for i = 341, 362 do --hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 3 then
			for i = 371, 392 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 4 then
			for i = 401, 422 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 5 then
			for i = 431, 452 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 6 then
			for i = 461, 482 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 7 then
			for i = 491, 512 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
		if nMenpai == 8 then
			for i = 521, 542 do--hd edit 
				if HaveSkill(sceneId, selfId, i) < 1 then
					AddSkill(sceneId, selfId, i)
				end
			end
		end
	x002084_NotifyFailBox( sceneId, selfId, targetId, "#YKhi b¸ m¤t các kÛ nång. Các hÕ có th¬ quay lÕi ðây ð¬ lînh nh§n lÕi !" )
end

function x002084_ShenYuan( sceneId, selfId, targetId )
	
	local day = GetDayTime();
	local lastDay = GetMissionData(sceneId, selfId, MD_SPRING07DENGMI_DAYTIME); --sØ døng biªn MD_SPRING07DENGMI_DAYTIME : 222
	
	if lastDay == day then
		local msg= "Chào bÕn, hôm nay bÕn ðã sØ døng chÑc nång này. M²i ngày chï ðßþc dùng chÑc nång này mµt l¥n. #rHãy quay lÕi vào hôm sau." 
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return 
	end
	BeginUICommand(sceneId)
	EndUICommand(sceneId)
	DispatchUICommand(sceneId,selfId, 1000)
	LuaFnSendGuajiQuestion( sceneId, selfId )--call bang cau hoi chong auto
	SetMissionData(sceneId, selfId, MD_SPRING07DENGMI_DAYTIME, day); --set mision
end


function x002084_LevelUpXinfa150(sceneId, selfId, targetId)

		if GetLevel(sceneId,selfId) <= 118  then
			x002084_NotifyFailBox( sceneId, selfId, targetId, "ÐÆng c¤p cüa các hÕ chßa ðü hãy ðªn g£p ta khi ðÕt c¤p ðµ 119!" )
			return
		end

		local nMenpai = GetMenPai(sceneId, selfId)
		if nMenpai<0 or nMenpai>8   then
			x002084_NotifyFailBox( sceneId, selfId, targetId, "Các hÕ chßa ra nh§p môn phái, chßa th¬ nâng tâm pháp 150" )
			return
		end

		for i=1, 6 do
			LuaFnSetXinFaLevel(sceneId,selfId,nMenpai*6 + i,150)
		end
		LuaFnSetXinFaLevel(sceneId,selfId,nMenpai +55,150)
			x002084_NotifyFailBox( sceneId, selfId, targetId, "Nâng tâm pháp 150 thành công!" )
		return
end


function x002084_tienvang1w(sceneId, selfId, targetId)

	local nganluong = 100000000
	local phieu_tienvang1w = 39910004

	--check money
	local nMoneyJB = GetMoney(sceneId,selfId)
	if nMoneyJB < nganluong then
		x002084_NotifyFailTips( sceneId, selfId,"Không ðü ngân lßþng")
		return
	end
	--check bag
	local nBagIndex = TryRecieveItem( sceneId, selfId, phieu_tienvang1w, 1 );
	if nBagIndex < 0 then
		BeginEvent(sceneId)
			strText = "Túi ðñng ð° ðã ð¥y"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	end
	
	--cost money
	local reply = CostMoney(sceneId,selfId,nganluong)
	if reply == -1 then
		x002084_NotifyFailTips( sceneId, selfId, "Không ðü ngân lßþng, vi®c chuy¬n ð±i b¸ hüy" )
		LuaFnDelAvailableItem(sceneId,selfId, phieu_tienvang1w, 1) --check again
		return
	end
	
	local str =  format(" #YCác hÕ ðã chuy¬n ð±i thành công #{_EXCHG%d}  !",nganluong);
	x002084_NotifyFailTips( sceneId, selfId, str )
	x002084_NotifyFailBox( sceneId, selfId, targetId, str )
	return
	
end

function x002084_tienvang10w(sceneId, selfId, targetId)

	local nganluong = 1000000000
	local phieu_tienvang10w = 39910005

	--check money
	local nMoneyJB = GetMoney(sceneId,selfId)
	if nMoneyJB < nganluong then
		x002084_NotifyFailTips( sceneId, selfId,"Không ðü ngân lßþng")
		return
	end
	--check bag
	local nBagIndex = TryRecieveItem( sceneId, selfId, phieu_tienvang10w, 1 );
	if nBagIndex < 0 then
		BeginEvent(sceneId)
			strText = "Túi ðñng ð° ðã ð¥y"
			AddText(sceneId,strText);
		EndEvent(sceneId)
		DispatchMissionTips(sceneId,selfId)
		return
	end
	
	--cost money
	local reply = CostMoney(sceneId,selfId,nganluong)
	if reply == -1 then
		x002084_NotifyFailTips( sceneId, selfId, "Không ðü ngân lßþng, vi®c chuy¬n ð±i b¸ hüy" )
		LuaFnDelAvailableItem(sceneId,selfId, phieu_tienvang10w, 1) --check again
		return
	end
	
	local str =  format(" #YCác hÕ ðã chuy¬n ð±i thành công #{_EXCHG%d}  !",nganluong);
	x002084_NotifyFailTips( sceneId, selfId, str )
	x002084_NotifyFailBox( sceneId, selfId, targetId, str )
	return
	
end

function x002084_fixpmp( sceneId, selfId )

	
	--ÉèÖÃÌôÕ½¹ýÒ»´ÎçÎç¿·å....
	local lastTime = GetMissionData( sceneId, selfId, MD_PIAOMIAOFENG_LASTTIME )
	local lastDayTime = floor( lastTime / 100 )
	local lastDayCount = mod( lastTime, 100 )
	local CurDayTime = GetDayTime()

	if CurDayTime > lastDayTime then
		lastDayTime = CurDayTime
		lastDayCount = 0
	end

	lastDayCount = 0-- lastDayCount + 1
	lastTime = lastDayTime * 100 + lastDayCount
	SetMissionData( sceneId, selfId, MD_PIAOMIAOFENG_LASTTIME, lastTime )
	local str =  format(" #YÐã sØa l²i PMP thành công !");
	x002084_NotifyFailTips( sceneId, selfId, str )
	x002084_NotifyFailBox( sceneId, selfId, targetId, str )
end

function x002084_upbt8(sceneId,selfId,targetId)
	local max_tamphap = 120
		
	local level =  GetLevel( sceneId, selfId )
	local menpai = GetMenPai(sceneId, selfId)	
	--check level
	if level < 80 then
		BeginEvent(sceneId)
			AddText(sceneId, " Các hÕ c¥n ðÕt c¤p ðµ 80 sau ðó quay lÕi g£p ta !" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	--check menpai
	if menpai == 9 then
		BeginEvent(sceneId)
			AddText(sceneId, " Các hÕ c¥n gia nh§p môn phái m¾i dùng ðßþc tính nång này !" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	--check xinfa
	--x002084_NotifyFailTips( sceneId, selfId,"Menpai : "..menpai.."")
	
	local xinfaid  = -1
	xinfaid = x002084_checkxinfa_bt8(sceneId,selfId,targetId)
	
	if  xinfaid == -1 then
		BeginEvent(sceneId)
			AddText(sceneId, " Có l²i khi ki¬m tra tâm pháp bí t¸ch môn phái, liên h® GM ð¬ ðßþc xØ lý" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	--x002084_NotifyFailTips( sceneId, selfId,"xinfaid : "..xinfaid.."")
	--check tam phap
	local xinfa =-1
	xinfa = LuaFnGetXinFaLevel(sceneId,selfId,xinfaid)
	if xinfa <1 then
		BeginEvent(sceneId)
			AddText(sceneId, " Các hÕ chßa h÷c bí t¸ch thÑ 8 cüa môn phái. Ta không th¬ giúp các hÕ ðßþc !" );
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)
		return
	end
	if xinfa >=1 then
		BeginEvent(sceneId)
			AddText(sceneId,"Ð¬ thång c¤p tâm pháp bí t¸ch th¤t truy«n cüa môn phái. Các hÕ hãy ðªn g£p ta, nh¾ chu¦n b¸ ðü ngân lßþng và ði¬m kinh nghi®m !")
			for i = 1, getn( x002084_g_xinfa_study ) do
		
				if xinfa == x002084_g_xinfa_study[i].level then
					AddText(sceneId,"#GTâm pháp hi®n tÕi : #Y "..x002084_g_xinfa_study[i].level..".")
					if xinfa+1 >= max_tamphap then
						local str = "Tâm pháp ðã ðÕt c¤p cao nh¤t, không th¬ thång c¤p ðßþc !"
						x002084_NotifyFailBox( sceneId, selfId, targetId, str )
						return
					end
					AddText(sceneId,"#GC¥n ngân lßþng : #Y #{_EXCHG"..x002084_g_xinfa_study[i].money.."}.")
					AddText(sceneId,"#GC¥n ði¬m kinh nghi®m : #Y "..x002084_g_xinfa_study[i].exp..".")
					if xinfa+1 < max_tamphap then --check max tam phap
						local key = 30000+x002084_g_xinfa_study[i].level 
						
						--x002084_NotifyFailTips( sceneId, selfId,"key : "..key..".")
						AddNumText( sceneId, x002084_g_scriptId, "Thång c¤p tâm pháp", 6 , key ) 
						
						
					end	
				end
			end
		EndEvent(sceneId)
		DispatchEventList(sceneId,selfId,targetId)

	end
	
end

function x002084_checkxinfa_bt8( sceneId, selfId, targetId)
	local xinfaid =-1
	local menpai = GetMenPai(sceneId, selfId)	
	--x002084_NotifyFailTips( sceneId, selfId,"Menpai : "..menpai.."")
	for i = 1, getn( x002084_g_bitichthu8 ) do
		if menpai == x002084_g_bitichthu8[i].menpai then
			xinfaid = x002084_g_bitichthu8[i].xinfaid
			break
		end	
	end
	--x002084_NotifyFailTips( sceneId, selfId,"xinfaid : "..xinfaid..".")
	return xinfaid
	
end


function x002084_upxinfabt8( sceneId, selfId, targetId,key)

	--x002084_NotifyFailTips( sceneId, selfId,"key : "..key..".")
	xinfalv =  mod (key,30000)
	--x002084_NotifyFailTips( sceneId, selfId,"xinfalv : "..xinfalv..".")
	--**************************************************************
	
	if key == 30000+xinfalv then
	local i = xinfalv
		
		if key == 30000+x002084_g_xinfa_study[i].level  then
			--check money
			local nMoneyJZ = GetMoneyJZ(sceneId,selfId)
			local nMoneyJB = GetMoney(sceneId,selfId)
			local nMoneySelf = nMoneyJZ + nMoneyJB
			if nMoneySelf < x002084_g_xinfa_study[i].money then
				x002084_NotifyFailTips( sceneId, selfId,"Không ðü ngân lßþng")
				return
			end
			--check exp
			if GetExp(sceneId,selfId) < x002084_g_xinfa_study[i].exp  then
				x002084_NotifyFailTips( sceneId, selfId,"Không ðü ði¬m kinh nghi®m")
				return
			end
			--cost exp, money
			LuaFnAddExp(sceneId,selfId,-1*x002084_g_xinfa_study[i].exp )
			local jzCost, jbCost = LuaFnCostMoneyWithPriority( sceneId, selfId, x002084_g_xinfa_study[i].money );	
			if jzCost == -1 then
				x002084_NotifyFailTips(sceneId, selfId, "Kh¤u tr× ti«n th¤t bÕi !")
				return
			end
			--check again 
			local menpai = GetMenPai(sceneId, selfId)	
			local xinfaid =-1
			xinfaid = x002084_checkxinfa_bt8(sceneId,selfId,targetId,menpai)
			--x002084_NotifyFailTips( sceneId, selfId, "xinfaid: "..xinfaid )
			if  xinfaid == -1 then
				BeginEvent(sceneId)
					AddText(sceneId, " Có l²i khi ki¬m tra tâm pháp bí t¸ch môn phái, liên h® GM ð¬ ðßþc xØ lý" );
				EndEvent(sceneId)
				DispatchEventList(sceneId,selfId,targetId)
				return
			end
		
			--check tam phap
			local xinfa=-1
			xinfa =  LuaFnGetXinFaLevel(sceneId,selfId,xinfaid)
			if xinfa <1 then
				BeginEvent(sceneId)
					AddText(sceneId, " Các hÕ chßa h÷c bí t¸ch thÑ 8 cüa môn phái. Ta không th¬ giúp các hÕ ðßþc !" );
				EndEvent(sceneId)
				DispatchEventList(sceneId,selfId,targetId)
				return
			end
			--end check again		
						
			--up tam phap
			LuaFnSetXinFaLevel(sceneId,selfId,xinfaid,x002084_g_xinfa_study[i].level+1)
			LuaFnSendSpecificImpactToUnit( sceneId, selfId, selfId, selfId, 18, 0 )
			x002084_NotifyFailBox(sceneId, selfId, targetId,"Thång c¤p tâm pháp thành công")

		end
		
	end
	
end

function x002084_ChuongCuYQ( sceneId, selfId, targetId )
	--check item
	local itemid = 30008053
	local num = LuaFnGetAvailableItemCount( sceneId, selfId, itemid )
	--x002084_NotifyFailTips( sceneId, selfId, "num :"..num )
	if num <1 then
		local msg = "Thiªu v§t ph¦m ho£c v§t ph¦m b¸ khoá"
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		x002084_NotifyFailTips( sceneId, selfId, msg )
		return
	end	
	--del item
	local reply = LuaFnDelAvailableItem( sceneId, selfId, itemid, num)
	--x002084_NotifyFailTips( sceneId, selfId, "reply : "..reply )
	--add zengdian
	local diemtang = num*5000
	--x002084_NotifyFailTips( sceneId, selfId, "diemtang : "..diemtang )
	if reply > 0 then
		local str = " #YBÕn v×a nh§n ðßþc #W"..diemtang.." #Yði¬m t£ng #Y"
		x002084_NotifyFailTips( sceneId, selfId, str )
		x002084_NotifyFailBox( sceneId, selfId, targetId, str )
		ZengDian(sceneId,selfId,targetId,1,diemtang);
	end
end

function x002084_TransferBT( sceneId, selfId, targetId )
	for i=1914,1918 do
		if HaveSkill( sceneId, selfId, i ) == 1 then
			DelSkill( sceneId, selfId, i )
			for j =1,50 do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	end
	for i=1919,1923 do
		if HaveSkill( sceneId, selfId, i ) == 1 then
			DelSkill( sceneId, selfId, i )
			for j =1,100 do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	end
	for i = 1851,1880 do
		if HaveSkill( sceneId, selfId, i ) == 1 then
			DelSkill( sceneId, selfId, i )
		end
	end
	for i=30311001,30311005 do
		if LuaFnGetAvailableItemCount( sceneId, selfId, i ) > 0 then
			LuaFnDelAvailableItem( sceneId, selfId, i, 1)
			for j =1,50 do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	end
	for i=30311006,30311010 do
		if LuaFnGetAvailableItemCount( sceneId, selfId, i ) > 0 then
			LuaFnDelAvailableItem( sceneId, selfId, i, 1)
			for j =1,100 do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	end
	local num =  LuaFnGetAvailableItemCount( sceneId, selfId, 38000529 )
	if num < 0 then 
		return 
	end
	if num < 250 then 
		local ret = LuaFnDelAvailableItem( sceneId, selfId, 38000529, num)
		if ret > 0 then
			for i =1,num do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	else
		local ret = LuaFnDelAvailableItem( sceneId, selfId, 38000529, 250)
		if ret > 0 then
			for i =1,250 do
				TryRecieveItem( sceneId, selfId, 20301009, 1 )
			end
		end
	end
end

function x002084_BuffBHDC( sceneId, selfId, targetId )
	--khai bao id bang nhan giai
	local bang_1_id = 11
	local bang_2_id = 373
	
	--if 1==1 then
	--	local msg = "Hi®n BUFF BHDC chßa cho phép nh§n. Vui lòng quay lÕi vào ngày mai ð¬ lînh nh§n."
	--	x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
	--	return
	--end	
	--kiem tra id bang
	local PlayerGID = GetHumanGuildID(sceneId, selfId)
	
	if (PlayerGID ~= bang_2_id and PlayerGID ~= bang_1_id) then
		local msg = "Các hÕ không thuµc Bang ðoÕt giäi trong sñ ki®n. Không th¬ nh§n BUFF."
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	end
	
	if PlayerGID == bang_1_id then
		LuaFnSendSpecificImpactToUnit( sceneId, selfId, selfId, selfId, 32599, 0 )
		local msg = "Nh§n BUFF BHDC giäi nh¤t thành công."
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	end
	
	if PlayerGID == bang_2_id then
		LuaFnSendSpecificImpactToUnit( sceneId, selfId, selfId, selfId, 32600, 0 )
		local msg = "Nh§n BUFF BHDC giäi nhì thành công."
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	end
	
	
	
end

function x002084_NhanLV_BHDC( sceneId, selfId, targetId )
	--khai bao id bang nhan giai
	local id_nv_bangchu_1 =1020035856
	local id_nv_bangchu_2 =1010212348
	local bang_1_id = 911
	local bang_2_id = 605
	
	--kiem tra id bang
	local PlayerGID = GetHumanGuildID(sceneId, selfId)
	
	if (PlayerGID ~= bang_2_id and PlayerGID ~= bang_1_id) then
		local msg = "Các hÕ không thuµc Bang ðoÕt giäi trong sñ ki®n. Không th¬ nh§n thß·ng."
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	end
	
	if PlayerGID == bang_1_id then
		local strGUID = LuaFnGetGUID( sceneId, selfId )
		--kiem id nv
		if strGUID ==id_nv_bangchu_1 then
			local solan = GetMissionData( sceneId, selfId, MD_CIRCUS_DAYCOUNT )
			if solan >=600 then
				local msg = "Ðã nh§n ðü ph¥n thß¶ng. Không th¬ nh§n tiªp."
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			local slot =LuaFnGetPropertyBagSpace( sceneId, selfId) --check slot bag
			if slot < 5 then
				local msg = "C¥n ð¬ tr¯ng 5 ô tr¯ng · túi ð°"
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			
			local Guildpos = GetGuildPos(sceneId, selfId)
			if Guildpos ~= GUILD_POSITION_CHIEFTAIN then
				local msg = "Không phäi Bang chü. Không th¬ nh§n thß·ng"
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			
			SetMissionData(sceneId, selfId, MD_CIRCUS_DAYCOUNT, solan+5 ); --tang so lan
			
			local msg = "Nh§n Long Vån thành công."
			x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
			
			return
			
		end
		
	end
	
	if PlayerGID == bang_2_id then
		local strGUID = LuaFnGetGUID( sceneId, selfId )
		--kiem id nv
		if strGUID ==id_nv_bangchu_2 then
			local solan = GetMissionData( sceneId, selfId, MD_CIRCUS_DAYCOUNT )
			if solan >=300 then
				local msg = "Ðã nh§n ðü ph¥n thß¶ng. Không th¬ nh§n tiªp."
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			local slot =LuaFnGetPropertyBagSpace( sceneId, selfId) --check slot bag
			if slot < 5 then
				local msg = "C¥n ð¬ tr¯ng 5 ô tr¯ng · túi ð°"
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			
			local Guildpos = GetGuildPos(sceneId, selfId)
			if Guildpos ~= GUILD_POSITION_CHIEFTAIN then
				local msg = "Không phäi Bang chü. Không th¬ nh§n thß·ng"
				x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
				return
			end
			
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			TryRecieveItem(sceneId,selfId,10157002, QUALITY_MUST_BE_CHANGE )--long van
			
			SetMissionData(sceneId, selfId, MD_CIRCUS_DAYCOUNT, solan+5 ); --tang so lan
			
			local msg = "Nh§n Long Vån thành công."
			x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
			
			return
			
		end
		
	end
	
	
	
end

function x002084_GetTitle_Miss( sceneId, selfId, targetId )

	local id_nv_1 =1020038175 --3CCC8C1F -xArctica hang 1
	local id_nv_2 =1040023901 --3DFD815D -M?chKhê hang 1
	
	
	local strGUID = LuaFnGetGUID( sceneId, selfId )
	local  PlayerSex=GetSex(sceneId,selfId)
	--kiem id nv
	if strGUID == id_nv_1 then
		if PlayerSex == 0 then
			LuaFnAwardSpouseTitle(sceneId, selfId, "Ð® Nh¤t MÛ Nhân")
			LuaFnDispatchAllTitle( sceneId, selfId )
		else
			LuaFnAwardSpouseTitle(sceneId, selfId, "Nam Vß½ng Tình Kiªm")
			LuaFnDispatchAllTitle( sceneId, selfId )
		end
		local msg = "Nh§n danh hi®u thành công"
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	elseif strGUID == id_nv_2 then
		if PlayerSex == 0 then
			LuaFnAwardSpouseTitle(sceneId, selfId, "Ð® Nh¤t MÛ Nhân")
			LuaFnDispatchAllTitle( sceneId, selfId )
		else
			LuaFnAwardSpouseTitle(sceneId, selfId, "Nam Vß½ng Tình Kiªm")
			LuaFnDispatchAllTitle( sceneId, selfId )
		end
		local msg = "Nh§n danh hi®u thành công"
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	else
		local msg = "Các hÕ không thuµc danh sách nh§n thß·ng Vui lòng liên h® GM ð¬ biªt thêm chi tiªt"
		x002084_NotifyFailBox( sceneId, selfId, targetId, msg )
		return
	end
	
end
